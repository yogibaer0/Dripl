<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AMEBA</title>

  <!-- ===== Config (injected by server.ts) ===== -->
  <meta name="supabase-url" content="{{SUPABASE_URL}}">
  <meta name="supabase-anon-key" content="{{SUPABASE_ANON_KEY}}">
  <meta name="api-base" content="{{API_BASE}}">
  <meta name="page-nonce" content="{{NONCE}}">

  <!-- ===== Styles ===== -->
  <link rel="stylesheet" href="/styles.css" />

  <!-- ===== Security: local UMD + CSP nonce ===== -->
  <script {{SUPABASE_SRI_ATTR}} src="/vendor/supabase.min.js" nonce="{{NONCE}}"></script>

  <!-- Bootstrap config for JS -->
  <script nonce="{{NONCE}}">
    (function () {
      const meta = (n) => document.querySelector(`meta[name="${n}"]`)?.content?.trim() || "";
      window.__APP__ = {
        NONCE: meta("page-nonce"),
        API_BASE: meta("api-base") || "",
        SUPABASE_URL: meta("supabase-url"),
        SUPABASE_ANON_KEY: meta("supabase-anon-key")
      };
    }());
  </script>
</head>

<body>
  <header class="hero">
    <h1 class="hero__title">AMEBA</h1>
    <div class="glow-line">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 10" preserveAspectRatio="none">
        <path d="M0,5 Q200,0 400,5" stroke="#8b5cf6" stroke-width="2" fill="none" opacity=".3"/>
      </svg>
    </div>
  </header>

  <div class="shell">
    <div class="panels">
      <!-- Upload Panel -->
      <section class="card panel--upload upload">
        <div class="card__head"><h2>Upload</h2></div>
        <div class="card__body">
          <div class="dropzone" id="dropzone">
            <div class="dropzone__hint">
              <p>Drag &amp; drop files here or paste a link below</p>
            </div>
          </div>

          <div class="upload__controls">
            <input id="paste-input" class="input" placeholder="Paste media link…" />
            <select id="format" class="select">
              <option value="mp4">MP4 (video)</option>
              <option value="mp3">MP3 (audio)</option>
              <option value="gif">GIF</option>
            </select>
            <button id="convert-btn" class="btn btn--primary">Convert</button>
          </div>

          <p class="muted">Tip: press <kbd>Enter</kbd> to convert instantly.</p>
        </div>
      </section>

      <!-- Import Panel -->
      <section class="card panel--import import">
        <div class="card__head"><h2>Import</h2></div>
        <div class="card__body import__cols">
          <div class="import__col">
            <h3>This device</h3>
            <input id="pick-files" type="file" multiple />
          </div>
          <div class="import__col">
            <h3>Dropbox</h3>
            <button class="btn secondary" id="btn-dropbox">Connect Dropbox</button>
            <p class="muted">Direct links, multi-select</p>
          </div>
          <div class="import__col">
            <h3>Google Drive</h3>
            <button class="btn secondary" id="btn-gdrive">Connect Google Drive</button>
            <p class="muted">Picker with OAuth</p>
          </div>
        </div>
      </section>

      <!-- Storage Panel -->
      <section class="card panel--storage storage">
        <div class="card__head">
          <h2>Storage</h2>
          <div class="toolbar">
            <button class="btn secondary">+ Folder</button>
            <button class="btn secondary">Filters</button>
            <button class="btn secondary">Presets</button>
          </div>
        </div>

        <div class="card__body">
          <div class="storage__search">
            <input id="storage-search" type="text" placeholder="Search files, tags, notes…" />
          </div>

          <div class="chips">
            <button class="chip chip--active">Recent</button>
            <button class="chip">Saved ★</button>
            <button class="chip">In progress</button>
            <button class="chip">Shared</button>
            <button class="chip">Trash</button>
          </div>

          <div class="grid" id="storage-list"></div>
        </div>
      </section>

      <!-- Destination Hub (full-width) -->
      <section class="card panel--dest dest">
        <div class="card__head"><h2>Destination Hub</h2></div>
        <div class="card__body dest">
          <!-- Preview -->
          <div class="dest__preview">
            <img class="dest__thumb" id="preview-thumb" alt="Preview" />
          </div>

          <!-- ===================== Destination Hub ===================== -->
<section class="panel panel--wide" aria-labelledby="dest-title">
  <h3 id="dest-title" class="panel-title">Destination Hub</h3>

  <!-- 3-column layout matching the sketch -->
  <div class="dest-grid">

    <!-- LEFT: Large preview window -->
    <div class="dest-preview">
      <div class="preview-frame">
        <!-- Use a <video> when you wire it; for now an image placeholder -->
        <img id="destPreviewImg" src="/assets/preview-placeholder.png" alt="Media preview" />
        <!-- Example video drop-in (keep commented for now)
        <video id="destPreviewVideo" controls muted playsinline></video>
        -->
      </div>
      <p class="preview-hint">Preview • 16:9 • drag a file above or paste a link</p>
    </div>

    <!-- MIDDLE: Meta data -->
    <div class="dest-meta">
      <div class="kv">
        <span class="k">Filename</span><span class="v" id="metaFilename">—</span>
      </div>
      <div class="kv">
        <span class="k">Duration</span><span class="v" id="metaDuration">—</span>
      </div>
      <div class="kv">
        <span class="k">Resolution</span><span class="v" id="metaResolution">—</span>
      </div>
      <div class="kv">
        <span class="k">Codec</span><span class="v" id="metaCodec">—</span>
      </div>

      <div class="dest-options">
        <label class="opt">
          <input type="checkbox" id="optWatermark" checked />
          <span>Watermark</span>
        </label>
        <label class="opt">
          <input type="checkbox" id="optAutotrim" />
          <span>Auto-trim</span>
        </label>
      </div>
    </div>

    <!-- RIGHT: One-click actions -->
    <aside class="dest-actions">
      <div class="actions-stack">
        <button class="btn btn--pill" data-dest="tiktok">TikTok</button>
        <button class="btn btn--pill" data-dest="instagram">Instagram</button>
        <button class="btn btn--pill" data-dest="youtube">YouTube</button>
        <button class="btn btn--pill" data-dest="reddit">Reddit</button>
      </div>

      <div class="action-toggles">
        <label class="opt">
          <input type="checkbox" id="optPlatformAlign" checked />
          <span>Auto-fit to platform</span>
        </label>
        <label class="opt">
          <input type="checkbox" id="optFaceFilters" />
          <span>Face filters</span>
        </label>
      </div>

      <button id="convertSelected" class="btn btn--primary btn--wide">
        Convert Selected
      </button>
    </aside>

  </div>
</section>

    </div>
  </div>

  <script src="/script.js" nonce="{{NONCE}}"></script>
</body>
</html>





















